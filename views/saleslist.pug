doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title MWF - Stock Table
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet")
    link(rel="stylesheet" href="css/stock-table.css")

  body
    // Navbar
    .navbar-custom.d-flex.justify-content-between.align-items-center.p-2
      .d-flex.align-items-center
        img(src="/images/mwf-logo.png" alt="MWF Logo" class="logo")
        span.ms-2.fw-bold Mayondo Wood & Furniture Ltd
      span.user-role Attendant

    // Sales Table
    .content.container.mt-4
      .card.p-4.shadow
        h4.mb-3 Sales Records
        table.table.table-striped.mt-3
          thead.table-dark
            tr
              th #
              th Customer
              th Product
              th Unit Price
              th Quantity
              th Payment Type
              th Transport
              th Agent
              th Date
              if currentUser && currentUser.role === 'Manager'
                th Actions
          tbody
            if sales.length
              each sale in sales
                tr
                  td #{index + 1}
                  td #{sale.customerName}
                  td #{sale.product}
                  td #{sale.unitPrice * sale.quantity}
                  td #{sale.quantity}
                  td #{sale.paymentType}
                  td #{sale.transport ? 'Yes' : 'No'}
                  td #{sale.agent && sale.agent.fullName ? sale.agent.fullName : 'N/A'}
                  td #{moment(sale.date).format('YYYY-MM-DD')}
                  if currentUser && currentUser.role === 'Manager'
                    td
                        a.btn.btn-sm.btn-primary.me-1(href=`/sales/edit/${sale._id}`) Edit
                        form(action=`/sales/delete/${sale._id}` method="POST" style="display:inline")
                        button.btn.btn-sm.btn-danger(type="submit" onclick="return confirm('Are you sure?')") Delete
            else
              tr
                td(colspan="9").text-center.text-muted No sales recorded yet
