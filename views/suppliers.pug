doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= title
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet")
    link(rel="stylesheet" href="/css/suppliers.css")
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")

    style.
      .navbar-custom {
        background: linear-gradient(90deg, #1a4d2e, #2e8b57);
        padding: 10px 20px;
      }
      .navbar-logo {
        height: 40px;
      }
      .company-name {
        font-size: 1.2rem;
        font-weight: bold;
        color: white;
      }
      .user-role {
        color: white;
        font-weight: bold;
      }

  body
    // Navbar
    .navbar-custom.d-flex.justify-content-between.align-items-center
      .d-flex.align-items-center
        a(href="/dashboard" class="d-flex align-items-center text-decoration-none")
          img.navbar-logo(src="/images/mwf-logo.png", alt="MWF Logo")
          span.company-name.ms-2 Mayondo Wood & Furniture Ltd
      .d-flex.align-items-center
        a.btn.btn-outline-light.me-3(href="/dashboard") Dashboard
        span.user-role Manager

    // Content
    .content.container.mt-4
      h2.mb-4 Suppliers

      // Add Supplier Button
      button.btn.btn-primary.mb-3(data-bs-toggle="modal" data-bs-target="#addSupplierModal") + Add Supplier

      // Suppliers Table
      if suppliers && suppliers.length
        table.table.table-bordered.table-hover
          thead.table-dark
            tr
              th #
              th Name
              th Phone
              th Email
              th Address
              th Actions
          tbody
            each supplier, i in suppliers
              tr
                td #{i + 1}
                td #{supplier.name}
                td #{supplier.phone}
                td #{supplier.email}
                td #{supplier.address}
                td
                  button.btn.btn-sm.btn-warning(
                    data-bs-toggle="modal"
                    data-bs-target=`#editSupplierModal-${supplier._id}`
                  ) Edit
                  form(action=`/dashboard/suppliers/delete/${supplier._id}` method="POST" style="display:inline;")
                    button.btn.btn-sm.btn-danger(type="submit") Delete
      else
        p.text-muted No suppliers found.

    // Add Supplier Modal
    .modal.fade#addSupplierModal(tabindex='-1' aria-hidden='true')
      .modal-dialog
        .modal-content
          .modal-header
            h5.modal-title Add New Supplier
            button.btn-close(type='button' data-bs-dismiss='modal' aria-label='Close')
          .modal-body
            form(action='/dashboard/suppliers/add' method='POST')
              .mb-3
                label.form-label(for='name') Supplier Name
                input.form-control(type='text' id='name' name='name' required)
              .mb-3
                label.form-label(for='phone') Phone Number
                input.form-control(type='text' id='phone' name='phone' required)
              .mb-3
                label.form-label(for='email') Email
                input.form-control(type='email' id='email' name='email')
              .mb-3
                label.form-label(for='address') Address
                input.form-control(type='text' id='address' name='address')
              button.btn.btn-success(type='submit') Save Supplier

    // Edit Supplier Modals
    if suppliers && suppliers.length
      each supplier in suppliers
        .modal.fade(id=`editSupplierModal-${supplier._id}` tabindex='-1' aria-hidden='true')
          .modal-dialog
            .modal-content
              .modal-header
                h5.modal-title Edit Supplier
                button.btn-close(type='button' data-bs-dismiss='modal' aria-label='Close')
              .modal-body
                form(action=`/dashboard/suppliers/edit/${supplier._id}` method='POST')
                  .mb-3
                    label.form-label(for='name') Supplier Name
                    input.form-control(type='text' id='name' name='name' required value=supplier.name)
                  .mb-3
                    label.form-label(for='phone') Phone Number
                    input.form-control(type='text' id='phone' name='phone' required value=supplier.phone)
                  .mb-3
                    label.form-label(for='email') Email
                    input.form-control(type='email' id='email' name='email' value=supplier.email)
                  .mb-3
                    label.form-label(for='address') Address
                    input.form-control(type='text' id='address' name='address' value=supplier.address)
                  button.btn.btn-success(type='submit') Update Supplier
