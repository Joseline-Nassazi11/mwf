doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title MWF - User Management
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet")
    link(rel="stylesheet" href="/css/user-table.css")

  body
    // Navbar
    .navbar-custom.d-flex.justify-content-between.align-items-center.p-2
      .d-flex.align-items-center
        a(href="/dashboard" class="d-flex align-items-center text-decoration-none")
          img(src="/images/mwf-logo.png" alt="MWF Logo" class="logo")
          span.ms-2.fw-bold Mayondo Wood & Furniture Ltd
      .d-flex.align-items-center
        a.btn.btn-outline-light.me-3(href="/dashboard") Dashboard
        span.user-role Manager

    // User Management
    .content.container.mt-4
      .card.p-4.shadow
        h4.mb-3 Registered Users

        // Search + Filter Row
        form.user-filters(action="/users" method="get")
          input.form-control.me-2(type="text" name="search" placeholder="Search by name or email" value=(search || ""))
          select.form-select.me-2(name="role")
            option(value="") All Roles
            option(value="Admin" selected=(role=="Admin")) Admin
            option(value="Manager" selected=(role=="Manager")) Manager
            option(value="Attendant" selected=(role=="Attendant")) Attendant
          button.btn.btn-success(type="submit") Search

        // User Table
        table.table.table-striped.table-hover.mt-3
          thead.table-dark
            tr
              th #
              th Full Name
              th Email
              th Role
              th Actions
          tbody
            if users.length
              each user, i in users
                tr
                  td #{i + 1}
                  td #{user.fullName}
                  td #{user.email}
                  td #{user.role}
                  td
                    a.btn.btn-sm.btn-primary.me-1(href=`/users/edit/${user._id}`) Edit
                    form(action=`/users/delete/${user._id}` method="POST" style="display:inline")
                      button.btn.btn-sm.btn-danger(type="submit" onclick="return confirm('Are you sure you want to delete this user?')") Delete
            else
              tr
                td(colspan="5" class="text-center text-muted") No users found
